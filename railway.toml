[build]
builder = "nixpacks"

[build.nixpacksPlan.phases.install]
cmd = "pnpm install --frozen-lockfile"

[build.nixpacksPlan.phases.build]
cmd = "pnpm --filter @padel/types build && pnpm --filter @padel/api prisma generate && pnpm --filter @padel/api build"

[deploy]
startCommand = "chmod +x apps/api/scripts/migrate-and-start.sh && bash apps/api/scripts/migrate-and-start.sh"

